
# Read more about containers on our dev center
# http://devcenter.wercker.com/docs/containers/index.html
box: tianon/centos:6.3

# This is the build pipeline. Pipelines are the core of wercker
# Read more about pipelines on our dev center
# http://devcenter.wercker.com/docs/pipelines/index.html
build:
    # Steps make up the actions in your pipeline
    # Read more about steps on our dev center:
    # http://devcenter.wercker.com/docs/steps/index.html
  steps:
    - script:
        name: install and build
        code: |
          sudo "yum clean all; yum install -y qt qt-devel subversion-devel git ; yum clean all ; yum groupinstall -y 'Development Tools' ; yum clean all "
          qmake-qt4 && make
deploy:
    steps:
    - mkdir dist
    - cp svn-all-fast-export dist/
    - s3sync:
        source_dir: dist/
        delete-removed: true
        bucket-url: $AWS_BUCKET_URL
        key-id: $AWS_ACCESS_KEY_ID
        key-secret: $AWS_SECRET_ACCESS_KEY
